# Vue Questions

## 1.说说Vue的响应式原理，它和React有什么区别？

Vue2.x 是依赖Object.defineProperty()实现响应式，缺点是无法劫持属性的删除和添加，对于数组也无法监听到变化，同时深层对象的递归劫持有较大的性能损耗。

Vue3 则是借助ES6新增的Proxy API 对对象属性进行劫持从而实现响应式，同时可以监听数组的变化。

React的响应式是依赖于虚拟DOM的DIFF算法以及自顶向下的单向数据流，当组件的内部的state发生变化，通过对比前后虚拟DOM从而触发render函数进行UI的变更。

## 2.Vue3相比Vue2有哪些变化？

## 3.Vue3做了哪些优化？

## 4.Vue组件通信的方式有哪些？

## 5.Vue中数据的双向绑定是如何实现的？原理是什么？

简单的说，Vue的数据双向绑定是通过**数据劫持**配合**发布-订阅模式**实现的。

> 数据劫持是指在访问或修改对象属性时，通过拦截的方式进行额外的处理。

1. 数据劫持：当创建Vue实例时，Vue会遍历传入的数据对象并进行响应化处理，通过设置一个`Observer`来监听所有属性。Vue2通过Object.defineProperty()设置对象setter和gettter方法来拦截对数据的读取和修改操作，而Vue3中则通过Proxy实现对对象的代理，从而实现基本操作的拦截和自定义。Proxy是深层次的监听，而不仅仅是某个属性。

2. 编译模板： 初始化时，同时使用指令解析器`Compile`对每个节点元素扫描解析，找到动态绑定的指令并替换成数据。同时初始化一个订阅者`Watcher`并添加指令绑定的相应更新函数，将来数据变化时`Watcher`可以执行更新函数从而更新视图。

3. 依赖收集： 由于订阅者会出现多个，所以需要一个消息订阅器`Dep`来专门收集这些订阅者，统一管理。

4. 更新：如果某个数据发生更新，会先找到消息订阅器`Dep`，通知所有的订阅者`Watcher`执行更新函数。

总的来说，Vue数据双向绑定的核心是通过`Watcher`实现数据与视图的同步。当数据变化时，通过`Watcher`检测到并通知相关视图更新；当用户与视图交互时，通过`Watcher`更新相关的数据。这样就实现了数据和视图的双向绑定。

## 6.Vue中$nextTick的原理是什么？它有哪些用途？

## 7.说说Vue中虚拟DOM Diff的原理？

## 8.Vue中key的作用是什么？为什么需要绑定key？

## 9.为什么不建议在Vue中使用index作为key？

## 10.说说Pinia的工作原理？他如何管理和维护状态？